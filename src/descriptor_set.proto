syntax = "proto3";

import "google/protobuf/descriptor.proto";

package mysqlprotobuf;

message DescriptorSet {
  google.protobuf.FileDescriptorSet file_descriptor_set = 1;

  map<string, MessageTypeIndex> message_type_index = 2;
  map<string, EnumTypeIndex> enum_type_index = 3;
}

message MessageTypeIndex {
  // JSON path to file from FileDescriptorSet ($). Always starts with $."1".
  string file_json_path = 1; // e.g. $."1"."1"[0]

  // JSON path to type from FileDescriptorSet ($). Always starts with $."1". and is a subpath of file_json_path.
  string type_json_path = 2; // e.g. $."1"."1"[0]."4"[0]

  // message type
  map<string, int32> field_name_index = 3;
  map<int32, int32> field_number_index = 4;
}

message EnumTypeIndex {
  // JSON path to file from FileDescriptorSet ($). Always starts with $."1".
  string file_json_path = 1; // e.g. $."1"."1"[0]

  // JSON path to type from FileDescriptorSet ($). Always starts with $."1". and is a subpath of file_json_path.
  string type_json_path = 2; // e.g. $."1"."1"[0]."4"[0]

  // enum type
  map<string, int32> enum_name_index = 3;
  map<int32, int32> enum_number_index = 4;
}
